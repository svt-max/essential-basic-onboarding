<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaxCredible Onboarding Experience</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-slate-50 text-slate-900 h-screen overflow-hidden flex flex-col">

    <div class="bg-white border-b border-slate-200 h-16 flex items-center justify-between px-6 z-50 shrink-0 relative">
    <div class="flex items-center gap-4 w-48">
        <img src="https://www.maxcredible.com/wp-content/uploads/2022/04/Logo-MaxCredible-nieuw.png" alt="MaxCredible" class="h-8 object-contain">
    </div>

    <nav class="hidden lg:flex items-center gap-1 absolute left-1/2 -translate-x-1/2 h-full">
        <a href="#" onclick="goToStep(10)" class="px-3 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 rounded-md hover:bg-slate-50 transition-colors">Dashboard</a>
        
        <a href="#" onclick="goToStep(7)" class="px-3 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 rounded-md hover:bg-slate-50 transition-colors">Mailbox</a>
        
        <div class="relative group h-full flex items-center">
            <button class="px-3 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 rounded-md hover:bg-slate-50 transition-colors flex items-center gap-1">
                To do <i class="ph ph-caret-down text-xs"></i>
            </button>
            <div class="absolute top-full left-1/2 -translate-x-1/2 w-auto min-w-[450px] bg-white border border-slate-200 shadow-xl rounded-xl p-2 hidden group-hover:flex justify-between animate-fade-in-down z-50">
                <a href="#" class="px-4 py-2 text-sm font-medium text-slate-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors text-center flex-1">Tasks</a>
                <a href="#" onclick="goToStep(6)" class="px-4 py-2 text-sm font-medium text-slate-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors text-center flex-1">Issues</a>
                <a href="#" class="px-4 py-2 text-sm font-bold text-slate-900 bg-slate-50 rounded-lg text-center flex-1">E-mails</a>
                <a href="#" class="px-4 py-2 text-sm font-medium text-slate-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors text-center flex-1">Letters</a>
                <a href="#" class="px-4 py-2 text-sm font-medium text-slate-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors text-center flex-1">Calls</a>
            </div>
        </div>

        <div class="relative group h-full flex items-center">
            <button class="px-3 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 rounded-md hover:bg-slate-50 transition-colors flex items-center gap-1">
                Invoice Hub <i class="ph ph-caret-down text-xs"></i>
            </button>
            <div class="absolute top-full left-1/2 -translate-x-1/2 w-auto min-w-[200px] bg-white border border-slate-200 shadow-xl rounded-xl p-2 hidden group-hover:flex flex-col gap-1 animate-fade-in-down z-50">
                <a href="#" onclick="goToStep(9)" class="px-4 py-2 text-sm font-medium text-slate-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors text-left">Invoices</a>
                <a href="#" class="px-4 py-2 text-sm font-medium text-slate-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors text-left">Customers</a>
            </div>
        </div>
        
        <div class="relative group h-full flex items-center">
            <button class="px-3 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 rounded-md hover:bg-slate-50 transition-colors flex items-center gap-1">
                Payment Journey <i class="ph ph-caret-down text-xs"></i>
            </button>
            <div class="absolute top-full left-1/2 -translate-x-1/2 w-auto min-w-[250px] bg-white border border-slate-200 shadow-xl rounded-xl p-2 hidden group-hover:flex items-center gap-2 animate-fade-in-down z-50 whitespace-nowrap">
                <a href="#" onclick="goToStep(5)" class="px-4 py-2 text-sm font-medium text-slate-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors text-center flex-1">Journeys</a>
                <div class="w-px h-6 bg-slate-200"></div>
                <a href="#" onclick="goToStep(3)" class="px-4 py-2 text-sm font-medium text-slate-600 hover:bg-blue-50 hover:text-blue-600 rounded-lg transition-colors text-center flex-1">Templates</a>
            </div>
        </div>
    </nav>
    
    <div class="flex items-center gap-6 w-auto justify-end">
        <button onclick="skipOnboarding()" class="text-slate-400 hover:text-slate-600 text-sm font-medium transition-colors whitespace-nowrap hidden xl:block">
            Skip Setup <i class="ph ph-fast-forward"></i>
        </button>
        
        <div class="flex items-center gap-3 border-l border-slate-200 pl-6">
            <select onchange="goToStep(parseInt(this.value))" id="global-nav" class="nav-dropdown bg-slate-50 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg py-1.5 pl-3 pr-8 focus:ring-2 focus:ring-blue-500 outline-none cursor-pointer hover:bg-slate-100 transition-colors">
                <option value="1">1. Financials</option>
                <option value="2">2. Connect Data</option>
                <option value="3">3. Design & Tone</option>
                <option value="4">4. Preview Reminders</option>
                <option value="5">5. Journey Builder</option>
                <option value="6">6. Handle Issues</option>
                <option value="7">7. Connect Inbox</option>
                <option value="8">8. Dashboard</option>
            </select>

            <div class="w-24 h-2 bg-slate-100 rounded-full overflow-hidden hidden md:block">
                <div id="progress-bar" class="h-full bg-blue-600 w-[12%] transition-all duration-500 ease-out"></div>
            </div>
        </div>
    </div>
</div>

<div class="flex-1 relative w-full h-full bg-slate-50 overflow-hidden">
    <div id="wizard-container" class="w-full h-full overflow-y-auto relative z-0">
        <div class="flex flex-col items-center min-h-full w-full py-8">
    
        <div id="step-0" class="step-panel active w-full max-w-2xl mx-auto mt-16 px-6 pb-20 items-center">
            <div class="bg-white p-10 rounded-2xl shadow-2xl border border-slate-200 text-center w-full relative z-10">
                <div class="mb-6 flex justify-center">
                    <img src="https://www.maxcredible.com/wp-content/uploads/2022/04/Logo-MaxCredible-nieuw.png" alt="MaxCredible" class="h-10 object-contain">
                </div>
                
                <h1 class="text-3xl font-bold text-slate-900 mb-3">Get started with MaxCredible</h1>
                <p class="text-slate-500 mb-8 text-base">Automate your debtor management in minutes.</p>

                <form id="form-register" onsubmit="event.preventDefault(); handleRegistration();" class="text-left space-y-6">
                    
                    <div class="relative group z-30">
    <label class="block text-xs font-bold text-slate-700 uppercase mb-1">Which accounting software do you use?</label>
    
    <div class="relative">
        <i class="ph ph-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-lg"></i>
        <input type="text" id="inp-software-gate" autocomplete="off" 
            placeholder="e.g. Exact, Twinfield, Xero..." 
            class="w-full pl-10 pr-4 py-3.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-800 transition-shadow text-base"
            oninput="filterSoftwareGate(this.value)"
            onfocus="filterSoftwareGate(this.value)">
        <i onclick="toggleGateDropdown()" class="ph ph-caret-down absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 cursor-pointer hover:text-blue-600 transition-colors p-1"></i>
    </div>

    <div id="gate-dropdown" class="hidden absolute top-full left-0 right-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-2xl max-h-72 overflow-y-auto animate-fade-in-down" style="z-index: 100;">
        <div class="p-2 text-xs font-bold text-slate-400 uppercase tracking-wider bg-slate-50 sticky top-0">Popular Integrations</div>
        
        <div class="divide-y divide-slate-50">
            <div onclick="selectSoftwareGate('Exact Online', 'supported')" class="gate-item px-4 py-3.5 hover:bg-blue-50 cursor-pointer flex items-center gap-3 group/item transition-colors">
                <div class="w-9 h-9 bg-red-600 rounded-lg text-white flex items-center justify-center font-bold text-xs shadow-sm">EO</div>
                <span class="font-medium text-slate-700 text-sm group-hover/item:text-blue-700">Exact Online</span>
                <span class="ml-auto text-[10px] font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-full">Instant</span>
            </div>

            <div onclick="selectSoftwareGate('Twinfield', 'supported')" class="gate-item px-4 py-3.5 hover:bg-blue-50 cursor-pointer flex items-center gap-3 group/item transition-colors">
                <div class="w-9 h-9 bg-blue-600 rounded-lg text-white flex items-center justify-center font-bold text-xs shadow-sm">TF</div>
                <span class="font-medium text-slate-700 text-sm group-hover/item:text-blue-700">Twinfield</span>
                <span class="ml-auto text-[10px] font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-full">Instant</span>
            </div>

            <div onclick="selectSoftwareGate('AFAS', 'supported')" class="gate-item px-4 py-3.5 hover:bg-blue-50 cursor-pointer flex items-center gap-3 group/item transition-colors">
                <div class="w-9 h-9 bg-slate-800 rounded-lg text-white flex items-center justify-center font-bold text-xs shadow-sm">AF</div>
                <span class="font-medium text-slate-700 text-sm group-hover/item:text-blue-700">AFAS</span>
                <span class="ml-auto text-[10px] font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-full">Instant</span>
            </div>

            <div onclick="selectSoftwareGate('Billtobox', 'supported')" class="gate-item px-4 py-3.5 hover:bg-blue-50 cursor-pointer flex items-center gap-3 group/item transition-colors">
                <div class="w-9 h-9 bg-purple-600 rounded-lg text-white flex items-center justify-center font-bold text-xs shadow-sm">BB</div>
                <span class="font-medium text-slate-700 text-sm group-hover/item:text-blue-700">Billtobox</span>
                <span class="ml-auto text-[10px] font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-full">Instant</span>
            </div>

            <div onclick="selectSoftwareGate('JeFacture', 'supported')" class="gate-item px-4 py-3.5 hover:bg-blue-50 cursor-pointer flex items-center gap-3 group/item transition-colors">
                <div class="w-9 h-9 bg-green-600 rounded-lg text-white flex items-center justify-center font-bold text-xs shadow-sm">JF</div>
                <span class="font-medium text-slate-700 text-sm group-hover/item:text-blue-700">JeFacture</span>
                <span class="ml-auto text-[10px] font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-full">Instant</span>
            </div>

            <div onclick="selectSoftwareGate('Banqup', 'supported')" class="gate-item px-4 py-3.5 hover:bg-blue-50 cursor-pointer flex items-center gap-3 group/item transition-colors">
                <div class="w-9 h-9 bg-indigo-600 rounded-lg text-white flex items-center justify-center font-bold text-xs shadow-sm">BQ</div>
                <span class="font-medium text-slate-700 text-sm group-hover/item:text-blue-700">Banqup</span>
                <span class="ml-auto text-[10px] font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-full">Instant</span>
            </div>

            <div onclick="selectSoftwareGate('Xero', 'csv')" class="gate-item px-4 py-3.5 hover:bg-blue-50 cursor-pointer flex items-center gap-3 group/item transition-colors">
                <div class="w-9 h-9 bg-blue-400 rounded-lg text-white flex items-center justify-center font-bold text-xs shadow-sm">X</div>
                <span class="font-medium text-slate-700 text-sm group-hover/item:text-blue-700">Xero</span>
                <span class="ml-auto text-[10px] font-bold bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full">CSV Only</span>
            </div>

            <div onclick="selectSoftwareGate('Other', 'csv')" class="gate-item px-4 py-3.5 hover:bg-blue-50 cursor-pointer text-sm text-slate-500 font-medium border-t border-slate-100 flex items-center gap-3">
                <i class="ph ph-dots-three-circle text-xl text-slate-400"></i> Other / Custom ERP
            </div>
        </div>
    </div>
</div>

                    <div class="space-y-4 relative z-20">
                        <div>
                            <label class="block text-xs font-bold text-slate-700 uppercase mb-1">Work Email</label>
                            <input type="email" id="inp-reg-email" value="finance@maxcredible.com" placeholder="name@company.com" class="w-full p-3.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-700 uppercase mb-1">Password</label>
                            <input type="password" value="demo1234" placeholder="Create a password" class="w-full p-3.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium">
                        </div>
                    </div>

                    <div class="pt-2 relative z-10">
                        <button type="submit" id="btn-register" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-blue-500/30 transition-all flex items-center justify-center gap-2 transform active:scale-95">
                            Create Account <i class="ph ph-arrow-right"></i>
                        </button>
                        <p class="text-xs text-center text-slate-400 mt-4">By clicking above, you agree to our Terms & Conditions.</p>
                    </div>
                </form>
            </div>
            
            <div class="text-center mt-8 text-sm text-slate-500">
                Already have an account? <a href="#" class="text-blue-600 font-bold hover:underline">Log in</a>
            </div>
        </div>

    <div id="step-verify" class="step-panel w-full max-w-xl mx-auto mt-16 px-6 pb-20 items-center">
        <div class="bg-white p-10 rounded-2xl shadow-2xl border border-slate-200 text-center w-full relative z-10 animate-slide-up">
            
            <div class="w-16 h-16 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-6">
                <i class="ph ph-envelope-simple-open text-3xl"></i>
            </div>

            <h1 class="text-2xl font-bold text-slate-900 mb-3">Check your inbox</h1>
            <p class="text-slate-500 mb-8 text-sm leading-relaxed">
                We've sent a verification link to <strong id="verify-email-display" class="text-slate-800">finance@maxcredible.com</strong>.
                Please click the link to secure your account.
            </p>

            <div class="space-y-4">
                <button onclick="simulateVerification()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3.5 rounded-lg font-bold shadow-lg shadow-blue-500/30 transition-all flex items-center justify-center gap-2 group">
                    <span>Simulate: Click Link</span>
                    <i class="ph ph-arrow-right group-hover:translate-x-1 transition-transform"></i>
                </button>

                <div class="text-xs text-slate-400">
                    Didn't receive it? <button class="text-blue-600 font-bold hover:underline">Resend</button>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-8 text-sm text-slate-500">
            <button onclick="goToStep(0)" class="text-slate-400 hover:text-slate-600 flex items-center gap-1 mx-auto">
                <i class="ph ph-arrow-left"></i> Back to Register
            </button>
        </div>
    </div>
            <div id="step-1" class="step-panel w-full max-w-2xl mt-8 px-6 pb-20">
        <div class="bg-white p-8 rounded-2xl shadow-xl border border-slate-100">
            <h1 class="text-3xl font-bold text-slate-900 mb-2">Let's set your foundation.</h1>
            <p class="text-slate-500 mb-8">We need your official organization details to verify your identity and set up your secure 2FA payments.</p>
            
            <form id="form-financials" class="space-y-6 relative">
                <div id="registry-search-overlay" class="absolute inset-0 bg-white/90 z-20 hidden flex flex-col items-center justify-center backdrop-blur-sm rounded-lg">
                    <div class="flex items-center gap-3 mb-2">
                        <i class="ph ph-globe-hemisphere-east animate-spin text-3xl text-blue-600"></i>
                        <span class="text-lg font-bold text-slate-800">Searching EU Business Registry...</span>
                    </div>
                    <p class="text-sm text-slate-500">Connecting to e-justice.europa.eu</p>
                </div>

                <div class="space-y-6 border-b border-slate-100 pb-8">
                    <div class="flex justify-between items-end">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wide">Organization Details</h3>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-1">Country of Registration</label>
                        <select id="inp-country" onchange="checkCountrySupport()" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white font-medium text-slate-900 cursor-pointer">
                            <option value="" disabled selected>Select your location...</option>
                            <option value="NL">Netherlands (The)</option>
                            <option value="BE">Belgium</option>
                            <option value="DE">Germany</option>
                            <option value="FR">France</option>
                            <option value="IE">Ireland</option>
                            <option value="LU">Luxembourg</option>
                            <option value="US">United States (Manual Entry)</option>
                            <option value="GB">United Kingdom (Manual Entry)</option>
                        </select>
                        <p id="registry-hint" class="hidden text-xs text-blue-600 mt-2 flex items-center gap-1">
                            <i class="ph ph-check-circle-fill"></i> Connected to National Business Registry
                        </p>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="col-span-2 md:col-span-1">
                            <label class="block text-sm font-semibold text-slate-700 mb-1">Organization Name</label>
                            <div class="relative flex gap-2">
                                <input type="text" id="inp-org" placeholder="e.g. MaxCredible" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition font-medium text-slate-900">
                                <button type="button" id="btn-registry-lookup" onclick="performRegistryLookup()" class="hidden bg-blue-50 text-blue-600 border border-blue-200 px-4 rounded-lg font-bold text-sm hover:bg-blue-100 transition-colors items-center gap-2 whitespace-nowrap">
                                    <i class="ph ph-magnifying-glass"></i> Auto-fill
                                </button>
                            </div>
                        </div>
                        <div class="col-span-2 md:col-span-1">
                            <label class="block text-sm font-semibold text-slate-700 mb-1">CoC Number <span class="text-slate-400 font-normal">(Optional)</span></label>
                            <input type="text" id="inp-coc" placeholder="12345678" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition font-medium text-slate-900">
                        </div>
                    </div>

                    <div>
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-3">Address Details <span class="text-slate-300 font-normal normal-case">(Optional)</span></h3>
                        <div class="grid grid-cols-6 gap-4">
                            <div class="col-span-4">
                                <label class="block text-xs font-semibold text-slate-500 mb-1">Street</label>
                                <input type="text" id="inp-street" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-900">
                            </div>
                            <div class="col-span-2">
                                <label class="block text-xs font-semibold text-slate-500 mb-1">Number</label>
                                <input type="text" id="inp-number" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-900">
                            </div>
                            <div class="col-span-2">
                                <label class="block text-xs font-semibold text-slate-500 mb-1">Postal Code</label>
                                <input type="text" id="inp-zip" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-900">
                            </div>
                            <div class="col-span-4">
                                <label class="block text-xs font-semibold text-slate-500 mb-1">City</label>
                                <input type="text" id="inp-city" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-900">
                            </div>
                        </div>
                    </div>

                    <details class="group border border-slate-200 rounded-xl bg-slate-50 open:bg-white open:shadow-md transition-all duration-200" open>
                        <summary class="flex items-center justify-between p-4 cursor-pointer list-none text-slate-700 font-semibold select-none group-open:border-b group-open:border-slate-100">
                            <div class="flex items-center gap-2">
                                <i class="ph ph-user-circle text-xl text-slate-400 group-open:text-blue-600"></i>
                                <span>Your Contact Details</span>
                            </div>
                            <i class="ph ph-caret-down text-slate-400 transform group-open:rotate-180 transition-transform"></i>
                        </summary>
                        
                        <div class="p-4 space-y-4">
                            <div class="bg-blue-50 text-blue-800 text-xs p-3 rounded-lg flex items-start gap-2 border border-blue-100 mb-4">
                                <i class="ph ph-info mt-0.5"></i>
                                These details will be used by MaxCredible when we need to contact you regarding account security or billing.
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-xs font-semibold text-slate-500 mb-1">First Name</label>
                                    <input type="text" id="inp-fname" class="w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-900">
                                </div>
                                <div>
                                    <label class="block text-xs font-semibold text-slate-500 mb-1">Last Name</label>
                                    <input type="text" id="inp-lname" class="w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-900">
                                </div>
                                <div>
                                    <label class="block text-xs font-semibold text-slate-500 mb-1">Phone Number</label>
                                    <input type="tel" id="inp-phone" class="w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-900">
                                </div>
                                <div>
                                    <label class="block text-xs font-semibold text-slate-500 mb-1">Email Address</label>
                                    <input type="email" id="inp-email" class="w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-900">
                                </div>
                            </div>
                        </div>
                    </details>
                </div>

                <div class="space-y-4">
                    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wide">Bank Details (For Invoices)</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-1">IBAN</label>
                            <input type="text" value="NL88 KNAB 0414 8858 48" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition font-medium text-slate-900 font-mono">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-1">BIC (Swift)</label>
                            <input type="text" value="KNABNL2H" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition font-medium text-slate-900 font-mono">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-1">Base Currency</label>
                        <select class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white font-medium text-slate-900">
                            <option value="EUR" selected>EUR (€)</option>
                            <option value="USD">USD ($)</option>
                            <option value="GBP">GBP (£)</option>
                        </select>
                    </div>
                </div>

                <div class="pt-4 flex justify-end">
                    <button type="button" onclick="completeStep(1); goToStep(2)" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium shadow-lg shadow-blue-500/30 transition-all flex items-center gap-2">
                        Save & Continue <i class="ph ph-arrow-right font-bold"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>

        <div id="step-2" class="step-panel w-full max-w-4xl mt-12 px-6 pb-20 relative">
            <h1 class="text-3xl font-bold text-slate-900 mb-8 text-center">Bring in your invoices.</h1>
            
            <div id="integration-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8 w-full">
                </div>

            <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-6 relative group">
                <i class="ph ph-magnifying-glass absolute left-6 top-1/2 -translate-y-1/2 text-slate-400 text-xl"></i>
                <input type="text" id="suite-search" class="w-full pl-12 pr-4 py-3 bg-slate-50 rounded-lg border-none focus:ring-2 focus:ring-blue-100 transition text-lg outline-none" placeholder="Search 40+ other integrations (e.g. Xero, Sage)...">
                <div id="search-results" class="hidden absolute top-full left-0 right-0 bg-white shadow-xl rounded-b-xl border border-t-0 border-slate-100 z-10 max-h-60 overflow-y-auto"></div>
            </div>

            <div onclick="goToStep(3)" class="border-2 border-dashed border-slate-300 rounded-xl p-8 flex flex-col items-center justify-center text-center bg-slate-50 hover:bg-blue-50 hover:border-blue-400 transition-colors cursor-pointer group">
                <div class="w-14 h-14 bg-white rounded-full shadow-sm flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                    <i class="ph ph-upload-simple text-blue-600 text-2xl"></i>
                </div>
                <h3 class="text-lg font-semibold text-slate-900">Upload Data File (CSV)</h3>
                <p class="text-slate-500 text-sm mt-1">Drag & Drop your file here or click to browse</p>
                <span class="text-blue-600 text-xs font-semibold mt-4 hover:underline">Download Smart Template</span>
            </div>

            <div id="sync-overlay" class="absolute inset-0 bg-white/95 z-20 hidden flex flex-col items-center justify-center rounded-xl backdrop-blur-md">
                <div class="w-full max-w-md text-center">
                    
                    <div class="mb-8 relative inline-block">
                        <div class="w-20 h-20 bg-white rounded-2xl shadow-lg border border-slate-100 flex items-center justify-center z-10 relative" id="sync-logo-container">
                            </div>
                        <div class="absolute -inset-2 bg-blue-500/20 rounded-3xl blur-lg animate-pulse"></div>
                        
                        <div class="absolute top-1/2 left-20 w-16 h-0.5 bg-slate-200 -z-10">
                            <div class="absolute inset-0 bg-blue-500 animate-[loading_1s_infinite]"></div>
                        </div>
                        
                        <div class="absolute top-1/2 -right-32 -translate-y-1/2 w-12 h-12 bg-white rounded-xl shadow border border-slate-100 flex items-center justify-center">
                             <img src="https://www.maxcredible.com/wp-content/uploads/2022/04/Logo-MaxCredible-nieuw.png" class="w-8">
                        </div>
                    </div>

                    <h2 class="text-2xl font-bold text-slate-900 mb-2" id="sync-title">Connecting...</h2>
                    <p class="text-slate-500 text-sm mb-8" id="sync-status">Handshake initiated</p>

                    <div class="space-y-3 text-left bg-slate-50 p-6 rounded-xl border border-slate-100 mb-6">
                        <div class="flex justify-between items-center opacity-50 transition-opacity duration-300" id="sync-row-1">
                            <div class="flex items-center gap-3">
                                <div class="w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs text-white" id="icon-sync-1"><i class="ph ph-spinner animate-spin text-slate-500"></i></div>
                                <span class="text-sm font-semibold text-slate-700">Importing Ledger</span>
                            </div>
                            <span class="text-sm font-mono font-bold text-slate-900" id="count-sync-1">0</span>
                        </div>
                        
                        <div class="flex justify-between items-center opacity-50 transition-opacity duration-300" id="sync-row-2">
                            <div class="flex items-center gap-3">
                                <div class="w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs text-white" id="icon-sync-2"><i class="ph ph-circle text-slate-300"></i></div>
                                <span class="text-sm font-semibold text-slate-700">Calculating Risk Scores</span>
                            </div>
                            <span class="text-[10px] font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded hidden" id="badge-sync-2">AI ACTIVE</span>
                        </div>

                        <div class="flex justify-between items-center opacity-50 transition-opacity duration-300" id="sync-row-3">
                            <div class="flex items-center gap-3">
                                <div class="w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs text-white" id="icon-sync-3"><i class="ph ph-circle text-slate-300"></i></div>
                                <span class="text-sm font-semibold text-slate-700">Segmenting Profiles</span>
                            </div>
                            <span class="text-sm font-mono font-bold text-slate-900" id="count-sync-3">0</span>
                        </div>
                    </div>

                    <div class="h-1 w-full bg-slate-100 rounded-full overflow-hidden">
                        <div class="h-full bg-blue-600 w-0 transition-all duration-300" id="sync-progress-bar"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="step-3" class="step-panel w-full max-w-[1400px] lg:h-[calc(100vh-140px)] h-auto px-4 md:px-6">
    <div class="flex flex-col lg:flex-row gap-6 h-full pb-6">
        
        <div class="w-full lg:w-[400px] bg-white rounded-2xl shadow-xl border border-slate-200 flex flex-col h-auto lg:h-full shrink-0">
                    <div class="p-6 border-b border-slate-100 bg-slate-50/50">
                        <h2 class="text-xl font-bold text-slate-900">Design Studio</h2>
                        <p class="text-slate-500 text-sm">Customize your automated emails.</p>
                        
                        <div class="mt-4 bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-start gap-3">
                            <i class="ph ph-info text-blue-600 mt-0.5"></i>
                            <div>
                                <div class="text-xs font-bold text-blue-800 uppercase tracking-wide">First Reminder</div>
                                <p class="text-xs text-blue-700 leading-relaxed mt-1">
                                    You are designing the default template. <strong>We recommend keeping the default "Friendly" tone and Blue accent</strong> for the highest initial conversion rates.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 space-y-8">
                        
                        <div>
                            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-3">Branding</h3>
                            <div class="space-y-3">
                                <div class="flex items-center gap-4 p-3 bg-white rounded-lg border border-slate-200 shadow-sm">
                                    <div class="w-12 h-12 rounded-lg bg-slate-50 border border-slate-200 flex items-center justify-center p-1">
                                        <img src="https://www.maxcredible.com/wp-content/uploads/2022/04/Logo-MaxCredible-nieuw.png" class="w-full h-auto object-contain">
                                    </div>
                                    <div class="flex-1">
                                        <div class="text-xs text-slate-500">Logo</div>
                                        <div class="font-semibold text-slate-800 text-sm truncate">MaxCredible B.V.</div>
                                    </div>
                                    <button class="text-blue-600 hover:bg-blue-50 p-2 rounded transition"><i class="ph ph-arrows-clockwise"></i></button>
                                </div>

                                <div class="flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200 shadow-sm">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded bg-slate-100 flex items-center justify-center text-slate-400">
                                            <i class="ph ph-image text-xl"></i>
                                        </div>
                                        <div>
                                            <div class="font-semibold text-slate-800 text-sm">Header Banner</div>
                                            <div class="text-xs text-slate-500">Full width image</div>
                                        </div>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="chk-banner" class="sr-only peer" onchange="toggleBanner()">
                                        <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Tone of Voice</h3>
                            <div class="tone-grid">
                                <div class="tone-card active" onclick="setDesignTone('friendly', this)">
                                    <i class="ph ph-hand-waving"></i>
                                    <span class="tone-label">Friendly</span>
                                </div>
                                <div class="tone-card" onclick="setDesignTone('professional', this)">
                                    <i class="ph ph-briefcase"></i>
                                    <span class="tone-label">Factual</span>
                                </div>
                                <div class="tone-card" onclick="setDesignTone('casual', this)">
                                    <i class="ph ph-coffee"></i>
                                    <span class="tone-label">Casual</span>
                                </div>
                                
                                <div class="tone-card" onclick="setDesignTone('social', this)">
                                    <i class="ph ph-chats-circle"></i>
                                    <span class="tone-label">Social</span>
                                </div>
                                <div class="tone-card" onclick="setDesignTone('formal', this)">
                                    <i class="ph ph-scroll"></i>
                                    <span class="tone-label">Formal</span>
                                </div>
                                <div class="tone-card" onclick="setDesignTone('concise', this)">
                                    <i class="ph ph-lightning"></i>
                                    <span class="tone-label">Concise</span>
                                </div>

                                <div class="tone-card" onclick="setDesignTone('empathetic', this)">
                                    <i class="ph ph-heart"></i>
                                    <span class="tone-label">Soft</span>
                                </div>
                                <div class="tone-card" onclick="setDesignTone('strict', this)">
                                    <i class="ph ph-gavel"></i>
                                    <span class="tone-label">Strict</span>
                                </div>
                                <div class="tone-card" onclick="setDesignTone('urgent', this)">
                                    <i class="ph ph-alarm"></i>
                                    <span class="tone-label">Urgent</span>
                                </div>
                            </div>
                            <p class="text-xs text-slate-400 mt-2 italic text-center" id="tone-desc">Casual and polite. Best for early reminders.</p>
                        </div>

                        <div class="border-t border-slate-100 pt-5">
                            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">Component Styling</h3>
                            
                            <div class="mb-4">
                                <label class="block text-[10px] font-bold text-slate-400 mb-2 uppercase">Invoice Table</label>
                                <div class="grid grid-cols-3 gap-2">
                                    <label class="cursor-pointer">
                                        <input type="radio" name="table_style" value="minimal" class="option-input hidden" onchange="updateDesignParam('tableStyle', 'minimal')">
                                        <div class="option-card-sm text-center py-3 hover:bg-slate-50 border border-slate-200 rounded-lg">
                                            <div class="h-0.5 w-8 bg-slate-300 mx-auto mb-1"></div>
                                            <div class="h-0.5 w-8 bg-slate-200 mx-auto"></div>
                                            <span class="text-[10px] font-bold text-slate-500 block mt-1">Minimal</span>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="table_style" value="grid" checked class="option-input hidden" onchange="updateDesignParam('tableStyle', 'grid')">
                                        <div class="option-card-sm text-center py-3 hover:bg-slate-50 border border-slate-200 rounded-lg">
                                            <div class="h-4 w-8 border border-slate-300 mx-auto grid grid-cols-2">
                                                <div class="border-r border-slate-300"></div>
                                            </div>
                                            <span class="text-[10px] font-bold text-slate-500 block mt-1">Grid</span>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="table_style" value="bold" class="option-input hidden" onchange="updateDesignParam('tableStyle', 'bold')">
                                        <div class="option-card-sm text-center py-3 hover:bg-slate-50 border border-slate-200 rounded-lg">
                                            <div class="h-1.5 w-8 bg-slate-800 mx-auto mb-0.5 rounded-t-sm"></div>
                                            <div class="h-2 w-8 border border-slate-300 border-t-0 mx-auto rounded-b-sm"></div>
                                            <span class="text-[10px] font-bold text-slate-500 block mt-1">Bold</span>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <div>
                                <label class="block text-[10px] font-bold text-slate-400 mb-2 uppercase">Payment Info Box</label>
                                <div class="grid grid-cols-3 gap-2">
                                    <label class="cursor-pointer">
                                        <input type="radio" name="bank_style" value="dashed" checked class="option-input hidden" onchange="updateDesignParam('bankInfoStyle', 'dashed')">
                                        <div class="option-card-sm text-center py-3 hover:bg-slate-50 border border-slate-200 rounded-lg">
                                            <div class="h-4 w-8 border-2 border-dashed border-slate-300 mx-auto rounded bg-slate-50"></div>
                                            <span class="text-[10px] font-bold text-slate-500 block mt-1">Dashed</span>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="bank_style" value="outline" class="option-input hidden" onchange="updateDesignParam('bankInfoStyle', 'outline')">
                                        <div class="option-card-sm text-center py-3 hover:bg-slate-50 border border-slate-200 rounded-lg">
                                            <div class="h-4 w-8 border border-slate-300 mx-auto rounded bg-white shadow-sm"></div>
                                            <span class="text-[10px] font-bold text-slate-500 block mt-1">Card</span>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="bank_style" value="filled" class="option-input hidden" onchange="updateDesignParam('bankInfoStyle', 'filled')">
                                        <div class="option-card-sm text-center py-3 hover:bg-slate-50 border border-slate-200 rounded-lg">
                                            <div class="h-4 w-8 mx-auto rounded bg-slate-200"></div>
                                            <span class="text-[10px] font-bold text-slate-500 block mt-1">Filled</span>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">Layout & Styling</h3>
                            
                            <div class="mb-5">
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-slate-600 font-medium">Email Width</span>
                                    <span id="width-val" class="text-blue-600 font-bold font-mono">600px</span>
                                </div>
                                <input type="range" min="500" max="800" value="600" step="10" class="slider-thumb w-full" id="ctrl-width" oninput="updateDesignParam('width', this.value)">
                            </div>
                            
                            <div class="flex items-center justify-between gap-4 mb-4">
                                <div class="flex-1">
                                    <span class="block text-[10px] font-bold text-slate-400 mb-1 uppercase">Header Height</span>
                                    <div class="flex bg-slate-100 rounded-lg p-1">
                                        <button class="flex-1 px-2 py-1.5 rounded-md text-xs font-medium text-slate-500 hover:bg-white/50 focus:bg-white focus:text-slate-800 focus:shadow-sm focus:font-bold transition-all" onclick="updateDesignParam('headerSize', 'compact')">Sml</button>
                                        <button class="flex-1 px-2 py-1.5 rounded-md text-xs font-bold bg-white text-slate-800 shadow-sm" onclick="updateDesignParam('headerSize', 'standard')">Std</button>
                                        <button class="flex-1 px-2 py-1.5 rounded-md text-xs font-medium text-slate-500 hover:bg-white/50 focus:bg-white focus:text-slate-800 focus:shadow-sm focus:font-bold transition-all" onclick="updateDesignParam('headerSize', 'tall')">Lrg</button>
                                    </div>
                                </div>
                                
                                <div class="flex-1">
                                    <span class="block text-[10px] font-bold text-slate-400 mb-1 uppercase">Edges</span>
                                    <div class="flex bg-slate-100 rounded-lg p-1">
                                        <button class="flex-1 px-2 py-1.5 rounded-md text-xs font-bold bg-white text-slate-800 shadow-sm flex justify-center items-center gap-1" onclick="updateDesignParam('borderRadius', 'rounded')">
                                            <div class="w-3 h-3 border border-current rounded-sm"></div>
                                        </button>
                                        <button class="flex-1 px-2 py-1.5 rounded-md text-xs font-medium text-slate-500 hover:bg-white/50 focus:bg-white focus:text-slate-800 focus:shadow-sm focus:font-bold transition-all flex justify-center items-center gap-1" onclick="updateDesignParam('borderRadius', 'square')">
                                            <div class="w-3 h-3 border border-current rounded-none"></div>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mb-6 border-t border-slate-100 pt-5">
                            <div class="flex justify-between items-center mb-3">
                                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider">Accent Color</h3>
                                <span class="text-[10px] bg-green-100 text-green-700 font-bold px-2 py-0.5 rounded-full">Recommended: Blue</span>
                            </div>
                            
                            <div class="flex items-center gap-3">
                                <button onclick="setAccentColor('#2563eb', this)" class="color-circle w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center transition-all ring-2 ring-offset-2 ring-slate-400 shadow-sm hover:scale-110">
                                    <i class="ph ph-check text-white text-xs"></i>
                                </button>
                                
                                <button onclick="setAccentColor('#7c3aed', this)" class="color-circle w-8 h-8 rounded-full bg-violet-600 flex items-center justify-center transition-all shadow-sm hover:scale-110">
                                </button>

                                <button onclick="setAccentColor('#059669', this)" class="color-circle w-8 h-8 rounded-full bg-emerald-600 flex items-center justify-center transition-all shadow-sm hover:scale-110">
                                </button>

                                <button onclick="setAccentColor('#dc2626', this)" class="color-circle w-8 h-8 rounded-full bg-red-600 flex items-center justify-center transition-all shadow-sm hover:scale-110">
                                </button>
                                
                                <button onclick="setAccentColor('#334155', this)" class="color-circle w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center transition-all shadow-sm hover:scale-110">
                                </button>
                            </div>
                        </div>

                        <div>
                            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Footer Settings</h3>
                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <label class="block text-[10px] font-bold text-slate-400 mb-1 uppercase">Footer Text</label>
                                    <input type="text" oninput="updateDesignParam('footerText', this.value)" placeholder="Registered in..." class="w-full p-2 text-xs border border-slate-300 rounded focus:ring-1 focus:ring-blue-500 outline-none">
                                </div>
                                <div>
                                    <label class="block text-[10px] font-bold text-slate-400 mb-1 uppercase">Website URL</label>
                                    <input type="text" oninput="updateDesignParam('website', this.value)" placeholder="www.site.com" class="w-full p-2 text-xs border border-slate-300 rounded focus:ring-1 focus:ring-blue-500 outline-none">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="p-6 border-t border-slate-100 bg-slate-50 rounded-b-2xl">
                        <button onclick="goToStep(4)" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium shadow-lg shadow-blue-500/30 transition-all flex items-center justify-center gap-2">
                            Save Template <i class="ph ph-floppy-disk"></i>
                        </button>
                    </div>
                </div>

                <div class="flex-1 bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden relative border border-slate-200">
                    <div class="bg-slate-100 h-12 flex items-center px-4 gap-2 shrink-0 border-b border-slate-200 justify-between">
                        <div class="flex gap-2">
                            <div class="w-3 h-3 rounded-full bg-slate-300"></div>
                            <div class="w-3 h-3 rounded-full bg-slate-300"></div>
                        </div>
                        <div class="text-xs font-semibold text-slate-500 uppercase tracking-wide">Live Preview</div>
                        <div class="w-16"></div>
                    </div>

                    <div class="bg-white px-6 py-3 border-b border-slate-100 flex flex-col gap-2 z-10">
                        <div class="flex gap-2 text-sm">
                            <span class="text-slate-400 font-medium w-16 text-right">Subject:</span>
                            <span id="preview-subject-line" class="font-bold text-slate-800">Friendly reminder regarding invoice INV-2023-001</span>
                        </div>
                    </div>

                    <div class="flex-1 bg-slate-100/50 relative overflow-hidden flex justify-center items-start pt-8 pb-8 overflow-y-auto">
                        <div id="preview-loader" class="hidden absolute inset-0 flex items-center justify-center bg-white/80 z-20 backdrop-blur-sm">
                            <div class="flex flex-col items-center">
                                <i class="ph ph-spinner animate-spin text-blue-600 text-3xl mb-2"></i>
                                <span class="text-xs font-bold text-blue-600 uppercase">Rendering...</span>
                            </div>
                        </div>
                        
                        <iframe id="email-preview-frame" src="about:blank" class="bg-white shadow-xl transition-all duration-500 ease-out" style="width: 600px; height: 100%; min-height: 600px;"></iframe>
                    </div>
                </div>
            </div>
        </div>

        <div id="ai-processing-overlay" class="fixed inset-0 z-[60] hidden flex flex-col items-center justify-center">
            <div class="w-full max-w-md">
                <div class="mb-8 flex justify-center">
                    <div class="relative">
                        <div class="w-20 h-20 border-4 border-slate-100 rounded-full"></div>
                        <div class="w-20 h-20 border-4 border-blue-600 rounded-full border-t-transparent absolute top-0 left-0 animate-spin"></div>
                        <i class="ph ph-brain absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-3xl text-blue-600"></i>
                    </div>
                </div>
                
                <h2 class="text-2xl font-bold text-slate-900 text-center mb-2">Analyzing your ledger...</h2>
                <p class="text-slate-500 text-center mb-8 text-sm">Our AI is segmenting your debtors based on payment behavior.</p>

                <div class="space-y-4 pl-12">
                    <div id="proc-step-1" class="processing-step flex items-center gap-3">
                        <i class="ph ph-check-circle text-xl"></i> <span>Validating contact details</span>
                    </div>
                    <div id="proc-step-2" class="processing-step flex items-center gap-3">
                        <i class="ph ph-check-circle text-xl"></i> <span>Calculating historic payment delays</span>
                    </div>
                    <div id="proc-step-3" class="processing-step flex items-center gap-3">
                        <i class="ph ph-check-circle text-xl"></i> <span>Assigning Risk Scores (A-F)</span>
                    </div>
                    <div id="proc-step-4" class="processing-step flex items-center gap-3">
                        <i class="ph ph-check-circle text-xl"></i> <span>Prioritizing outstanding actions</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="step-4" class="step-panel w-full max-w-6xl mt-12 px-6">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-slate-900 mb-2">Data Imported. We found 3 critical invoices.</h2>
                <p class="text-slate-500">Select an invoice below to preview and send your first reminder.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div onclick="openInvoicePreview('Acme Corp', '12.500,00', 'INV-2023-001', '15 Days Overdue', 'friendly')" class="bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:border-blue-500 hover:shadow-xl cursor-pointer transition-all group relative overflow-hidden invoice-card-gradient">
                    <div class="absolute top-0 left-0 w-full h-1 bg-blue-500"></div>
                    
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex flex-col">
                            <span class="text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-1">AI Recommendation</span>
                            <span class="px-2 py-1 rounded text-xs font-bold bg-blue-100 text-blue-700 flex items-center gap-1">
                                <i class="ph ph-star-fill"></i> Top Priority
                            </span>
                        </div>
                        <div class="text-right">
                            <div class="text-xs text-slate-400 font-bold uppercase">Risk Score</div>
                            <div class="text-lg font-bold text-green-600">A+</div>
                        </div>
                    </div>

                    <h3 class="text-3xl font-bold text-slate-900 mb-1">€ 12.500,00</h3>
                    <p class="text-slate-500 font-medium mb-6">Acme Corp</p>
                    
                    <div class="space-y-2 mb-6">
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-500">Due Date</span>
                            <span class="font-semibold text-slate-700">15 Days Ago</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-500">Avg. Payment Time</span>
                            <span class="font-semibold text-slate-700">34 Days</span>
                        </div>
                    </div>

                    <div class="w-full py-2 rounded-lg border border-blue-200 bg-blue-50 text-blue-600 font-semibold text-sm text-center group-hover:bg-blue-600 group-hover:text-white transition-colors">
                        Preview & Send Reminder
                    </div>
                </div>

                <div onclick="openInvoicePreview('Globex Inc.', '8.200,00', 'INV-2023-099', '45 Days Overdue', 'strict')" class="bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:border-red-500 hover:shadow-xl cursor-pointer transition-all group relative overflow-hidden invoice-card-gradient">
                    <div class="absolute top-0 left-0 w-full h-1 bg-red-500"></div>
                    
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex flex-col">
                            <span class="text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-1">AI Recommendation</span>
                            <span class="px-2 py-1 rounded text-xs font-bold bg-red-100 text-red-700 flex items-center gap-1">
                                <i class="ph ph-warning-circle-fill"></i> At Risk
                            </span>
                        </div>
                        <div class="text-right">
                            <div class="text-xs text-slate-400 font-bold uppercase">Risk Score</div>
                            <div class="text-lg font-bold text-red-600">D-</div>
                        </div>
                    </div>

                    <h3 class="text-3xl font-bold text-slate-900 mb-1">€ 8.200,00</h3>
                    <p class="text-slate-500 font-medium mb-6">Globex Inc.</p>
                    
                    <div class="space-y-2 mb-6">
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-500">Due Date</span>
                            <span class="font-semibold text-red-600">45 Days Ago</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-500">Last Communication</span>
                            <span class="font-semibold text-slate-700">No Reply</span>
                        </div>
                    </div>

                    <div class="w-full py-2 rounded-lg border border-red-200 bg-red-50 text-red-600 font-semibold text-sm text-center group-hover:bg-red-600 group-hover:text-white transition-colors">
                        Preview & Escalate
                    </div>
                </div>

                <div onclick="openInvoicePreview('Soylent Corp', '5.100,00', 'INV-2023-150', '2 Days Overdue', 'friendly')" class="bg-white rounded-2xl p-6 shadow-lg border border-slate-200 hover:border-orange-500 hover:shadow-xl cursor-pointer transition-all group relative overflow-hidden invoice-card-gradient">
                    <div class="absolute top-0 left-0 w-full h-1 bg-orange-500"></div>
                    
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex flex-col">
                            <span class="text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-1">AI Recommendation</span>
                            <span class="px-2 py-1 rounded text-xs font-bold bg-orange-100 text-orange-700 flex items-center gap-1">
                                <i class="ph ph-hand-waving-fill"></i> Retention
                            </span>
                        </div>
                        <div class="text-right">
                            <div class="text-xs text-slate-400 font-bold uppercase">Risk Score</div>
                            <div class="text-lg font-bold text-orange-500">B</div>
                        </div>
                    </div>

                    <h3 class="text-3xl font-bold text-slate-900 mb-1">€ 5.100,00</h3>
                    <p class="text-slate-500 font-medium mb-6">Soylent Corp</p>
                    
                    <div class="space-y-2 mb-6">
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-500">Due Date</span>
                            <span class="font-semibold text-orange-600">2 Days Ago</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-500">Prediction</span>
                            <span class="font-semibold text-slate-700">Will pay Fri</span>
                        </div>
                    </div>

                    <div class="w-full py-2 rounded-lg border border-orange-200 bg-orange-50 text-orange-600 font-semibold text-sm text-center group-hover:bg-orange-500 group-hover:text-white transition-colors">
                        Preview & Nudge
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button onclick="goToStep(5)" class="text-slate-400 hover:text-slate-600 text-sm font-medium">Skip to full invoice list</button>
            </div>
        </div>

        <div id="invoice-preview-modal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] hidden flex items-center justify-center p-6">
            <div class="bg-slate-800 w-full max-w-4xl h-[80vh] rounded-2xl shadow-2xl flex flex-col animate-slide-up relative">
                <button onclick="closeInvoicePreview()" class="absolute -top-12 right-0 text-white hover:text-slate-200 transition">
                    <i class="ph ph-x text-2xl"></i> Close
                </button>
                <div class="bg-slate-900 px-6 py-3 rounded-t-2xl flex items-center justify-between">
                    <div class="flex items-center gap-2 text-slate-300 text-sm">
                        <i class="ph ph-eye"></i> Customer View
                    </div>
                    <div class="text-white font-semibold" id="preview-modal-title">Sending to Acme Corp</div>
                    <button onclick="confirmSend()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium text-sm transition-all flex items-center gap-2">
                        Send This Email <i class="ph ph-paper-plane-right"></i>
                    </button>
                </div>
                <div class="flex-1 bg-white relative overflow-hidden rounded-b-2xl">
                    <iframe id="invoice-preview-frame" src="about:blank"></iframe>
                </div>
            </div>
        </div>

        <div id="step-5" class="step-panel w-full max-w-4xl mt-8 px-6 pb-20">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-slate-900 mb-2">Configure your Autopilot.</h2>
                <p class="text-slate-500">Fine-tune the timing and channels for your automated journey.</p>
            </div>

            <div class="max-w-3xl mx-auto space-y-8">
                
                <div class="relative flex gap-6">
                    <div class="absolute left-[24px] top-12 bottom-[-40px] w-0.5 bg-slate-200 -z-10"></div>
                    
                    <div class="w-12 h-12 shrink-0 bg-blue-600 rounded-full border-4 border-blue-100 shadow-sm flex items-center justify-center text-white z-10">
                        <i class="ph ph-paper-plane-tilt text-xl font-bold"></i>
                    </div>

                    <div class="flex-1 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm">
                        <div class="flex justify-between items-start mb-6">
                            <div>
                                <h3 class="font-bold text-slate-900 text-lg">1. First Reminder</h3>
                                <p class="text-sm text-slate-500">Triggered by the due date.</p>
                            </div>
                            <span class="bg-slate-100 text-slate-500 border border-slate-200 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wide">Mandatory</span>
                        </div>

                        <div class="flex items-center gap-4 bg-slate-50 p-4 rounded-xl border border-slate-100">
                            <span class="text-sm font-semibold text-slate-600">Send this email:</span>
                            
                            <div class="stepper-container">
                                <button onclick="updateStepper('step1-days', -1)" class="stepper-btn"><i class="ph ph-minus"></i></button>
                                <input type="text" id="step1-days" value="1" readonly class="stepper-value">
                                <button onclick="updateStepper('step1-days', 1)" class="stepper-btn"><i class="ph ph-plus"></i></button>
                            </div>
                            
                            <span class="text-sm font-semibold text-slate-600">days after invoice due date.</span>
                        </div>
                    </div>
                </div>

                <div class="relative flex gap-6">
                    <div class="absolute left-[24px] top-12 bottom-[-40px] w-0.5 bg-slate-200 -z-10"></div>

                    <div class="w-12 h-12 shrink-0 bg-white rounded-full border-2 border-slate-200 flex items-center justify-center text-slate-400 z-10 transition-colors duration-300" id="icon-step-2">
                        <i class="ph ph-envelope-open text-xl"></i>
                    </div>

                    <div class="flex-1 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm transition-all duration-300" id="card-step-2">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h3 class="font-bold text-slate-900 text-lg">2. Follow-up Email</h3>
                                <p class="text-sm text-slate-500 transition-opacity duration-300" id="desc-step-2">Gentle nudge if still unpaid.</p>
                            </div>
                            <input type="checkbox" id="toggle-step-2" checked onclick="toggleStepModern('step-2')" class="premium-toggle">
                        </div>

                        <div id="config-step-2" class="transition-all duration-300 overflow-hidden" style="max-height: 200px; opacity: 1;">
                            <div class="flex items-center gap-4 bg-slate-50 p-4 rounded-xl border border-slate-100">
                                <span class="text-sm font-semibold text-slate-600">Wait another:</span>
                                
                                <div class="stepper-container">
                                    <button onclick="updateStepper('step2-days', -1)" class="stepper-btn"><i class="ph ph-minus"></i></button>
                                    <input type="text" id="step2-days" value="14" readonly class="stepper-value">
                                    <button onclick="updateStepper('step2-days', 1)" class="stepper-btn"><i class="ph ph-plus"></i></button>
                                </div>
                                
                                <span class="text-sm font-semibold text-slate-600">days before sending.</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="relative flex gap-6">
                    <div class="w-12 h-12 shrink-0 bg-white rounded-full border-2 border-slate-200 flex items-center justify-center text-slate-400 z-10 transition-colors duration-300" id="icon-step-3">
                        <i class="ph ph-phone-call text-xl"></i>
                    </div>

                    <div class="flex-1 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm transition-all duration-300" id="card-step-3">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h3 class="font-bold text-slate-900 text-lg">3. Final Escalation</h3>
                                <p class="text-sm text-slate-500 transition-opacity duration-300" id="desc-step-3">Choose how to handle bad debt.</p>
                            </div>
                            <input type="checkbox" id="toggle-step-3" checked onclick="toggleStepModern('step-3')" class="premium-toggle">
                        </div>

                        <div id="config-step-3" class="transition-all duration-300 overflow-hidden space-y-4" style="max-height: 400px; opacity: 1;">
                            
                            <div class="flex items-center gap-4">
                                <span class="text-sm font-semibold text-slate-600">Wait another:</span>
                                <div class="stepper-container">
                                    <button onclick="updateStepper('step3-days', -1)" class="stepper-btn"><i class="ph ph-minus"></i></button>
                                    <input type="text" id="step3-days" value="14" readonly class="stepper-value">
                                    <button onclick="updateStepper('step3-days', 1)" class="stepper-btn"><i class="ph ph-plus"></i></button>
                                </div>
                                <span class="text-sm font-semibold text-slate-600">days, then:</span>
                            </div>

                            <div class="grid grid-cols-2 gap-4 pt-2">
                                <label class="cursor-pointer group">
                                    <input type="radio" name="escalation_type" checked class="visual-radio sr-only" onchange="updateModernIcon(3, 'email')">
                                    <div class="visual-card p-4 rounded-xl border border-slate-200 hover:border-blue-300 hover:bg-slate-50 transition-all flex items-start gap-3">
                                        <div class="radio-circle-outer mt-1 group-hover:border-blue-400">
                                            <div class="radio-circle-inner"></div>
                                        </div>
                                        <div>
                                            <div class="font-bold text-slate-900 mb-1">Send Final Email</div>
                                            <div class="text-xs text-slate-500">"Demand for payment"</div>
                                        </div>
                                        <i class="ph ph-envelope-simple text-2xl text-slate-300 ml-auto group-hover:text-blue-300"></i>
                                    </div>
                                </label>

                                <label class="cursor-pointer group">
                                    <input type="radio" name="escalation_type" class="visual-radio sr-only" onchange="updateModernIcon(3, 'phone')">
                                    <div class="visual-card p-4 rounded-xl border border-slate-200 hover:border-blue-300 hover:bg-slate-50 transition-all flex items-start gap-3">
                                        <div class="radio-circle-outer mt-1 group-hover:border-blue-400">
                                            <div class="radio-circle-inner"></div>
                                        </div>
                                        <div>
                                            <div class="font-bold text-slate-900 mb-1">Call Task</div>
                                            <div class="text-xs text-slate-500">Add to daily call list</div>
                                        </div>
                                        <i class="ph ph-phone-call text-2xl text-slate-300 ml-auto group-hover:text-blue-300"></i>
                                    </div>
                                </label>
                            </div>

                        </div>
                    </div>
                </div>

            </div>

            <div class="flex justify-center gap-4 mt-12">
                <button onclick="goToStep(6)" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium shadow-lg shadow-blue-500/30 transition-all flex items-center gap-2 transform active:scale-95">
                    Save & Activate Journey <i class="ph ph-check-circle text-lg"></i>
                </button>
            </div>
        </div>

        <div id="step-6" class="step-panel w-full max-w-6xl mt-8 px-6 pb-20">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-slate-900 mb-2">Automation is running.</h2>
                <p class="text-slate-500">Normally, MaxCredible works in the background. But sometimes, you need to intervene.</p>
            </div>

            <div class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden relative min-h-[500px]">
                <div class="p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                    <div class="flex items-center gap-2">
                        <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                        <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Live Monitor</h3>
                    </div>
                    <div class="text-xs font-mono text-slate-400">Monitoring 43 Active Invoices</div>
                </div>
                
                <div class="p-6 space-y-4 relative">
                    
                    <div id="invoice-row-acme" class="flex items-center justify-between p-4 border rounded-xl bg-white border-slate-100 transition-all duration-500 relative overflow-hidden group">
                        <div id="acme-highlight" class="absolute left-0 top-0 bottom-0 w-1 bg-red-500 transition-transform duration-300 -translate-x-full"></div>
                        
                        <div class="flex gap-4 items-center relative z-10">
                            <div class="relative">
                                <div class="w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center text-slate-500 font-bold border border-slate-200">A</div>
                                <div id="acme-dot" class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 border-2 border-white rounded-full hidden"></div> 
                            </div>
                            <div>
                                <div class="font-bold text-slate-800 flex items-center gap-2">
                                    Acme Corp - INV-2023-001
                                    <span id="acme-status" class="text-[10px] font-bold uppercase bg-blue-50 text-blue-600 px-2 py-0.5 rounded border border-blue-100">Scheduled: Tomorrow</span>
                                </div>
                                <div class="text-xs text-slate-500 mt-0.5">€ 2.500,00 • 15 Days Overdue</div>
                            </div>
                        </div>

                        <div class="flex items-center gap-4 relative z-10">
                            <div id="acme-actions">
                                <span class="text-xs text-slate-400 italic mr-2">Automation active...</span>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center justify-between p-4 border rounded-xl bg-slate-50 border-slate-100 opacity-60">
                        <div class="flex gap-4 items-center">
                            <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-slate-400 font-bold border border-slate-200">G</div>
                            <div>
                                <div class="font-semibold text-slate-700">Globex Inc - INV-2023-099</div>
                                <div class="text-xs text-slate-400">Scheduled: In 3 days</div>
                            </div>
                        </div>
                        <span class="font-semibold text-slate-400">€ 8.200,00</span>
                    </div>

                    <div id="email-toast" class="absolute top-2 right-4 z-20 bg-white pl-4 pr-6 py-3 rounded-lg shadow-xl border-l-4 border-red-500 flex items-center gap-4 hidden max-w-md cursor-pointer hover:bg-slate-50 transition-colors" onclick="openDisputeModal()">
                        <div class="relative w-10 h-10 shrink-0">
                            <div class="pulse-ring"></div>
                            <div class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center text-white relative z-10">
                                <i class="ph ph-envelope-open text-xl"></i>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-bold text-slate-900 text-sm">New Reply Received!</h4>
                            <p class="text-xs text-slate-500 line-clamp-1">"We cannot pay INV-2023-001 yet because..."</p>
                            <div class="text-blue-600 text-xs font-bold mt-1">Click to Review</div>
                        </div>
                    </div>
                </div>

                <div id="dispute-overlay" class="absolute inset-0 bg-slate-900/50 backdrop-blur-sm z-30 flex items-center justify-center p-4 opacity-0 pointer-events-none transition-opacity duration-300">
                    <div class="bg-white rounded-2xl w-full max-w-xl shadow-2xl overflow-hidden transform scale-95 transition-transform duration-300 flex flex-col" id="dispute-modal">
                        
                        <div class="bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center">
                            <div>
                                <h3 class="font-bold text-slate-900 text-lg">Log an Issue</h3>
                                <p class="text-xs text-slate-500">Categorize the customer's reply to update the workflow.</p>
                            </div>
                            <button onclick="closeDisputeModal()" class="text-slate-400 hover:text-slate-600"><i class="ph ph-x text-xl"></i></button>
                        </div>

                        <div class="p-6">
                            <label class="block text-xs font-bold text-slate-500 uppercase tracking-wide mb-2">Issue Category</label>
                            <select id="issue-category-select" class="w-full p-3 border border-slate-300 rounded-lg bg-white outline-none focus:ring-2 focus:ring-blue-500 mb-6 text-slate-700 font-medium transition-shadow">
                                <option value="" disabled selected>Select a category...</option>
                                <option value="dispute">Dispute / Goods Damaged</option>
                                <option value="promise">Payment Promise</option>
                                <option value="info">Client Account / Information Issues</option>
                                <option value="payment">Payment Issues (Failed Transaction)</option>
                                <option value="billing">Invoice / Billing Issues</option>
                                <option value="service">Product / Service Issues</option>
                                <option value="legal">External / Legal Issues</option>
                                <option value="org">Organizational Issues</option>
                            </select>

                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                                <label class="flex items-start gap-3 cursor-pointer">
                                    <input type="checkbox" checked class="mt-1 w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                                    <div>
                                        <span class="font-bold text-slate-800 text-sm block">Pause Automatic Reminders</span>
                                        <span class="text-xs text-slate-500 block mt-0.5">Stops the journey for this invoice while you investigate.</span>
                                    </div>
                                </label>
                            </div>

                            <button onclick="resolveDispute('pause')" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg shadow-lg shadow-blue-500/30 transition-all flex items-center justify-center gap-2">
                                <i class="ph ph-floppy-disk"></i> Save & Pause Journey
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="step-7" class="step-panel w-full max-w-5xl mt-8 px-6 pb-20">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-slate-900 mb-2">Connect your Inbox.</h2>
                <p class="text-slate-500 max-w-2xl mx-auto">
                    It's simple. When a customer replies to you, just <strong>forward</strong> that email to us. 
                    We'll identify your address and automatically attach the reply to the correct invoice in MaxCredible.
                </p>
            </div>

            <div class="flex flex-col lg:grid lg:grid-cols-12 gap-8 items-start">
                
                <div class="lg:col-span-4 space-y-6 pt-4">
                    <div class="bg-blue-50 border border-blue-100 p-5 rounded-xl">
                        <h3 class="font-bold text-blue-900 mb-2 flex items-center gap-2">
                            <i class="ph ph-info"></i> How it works
                        </h3>
                        <ol class="space-y-4 text-sm text-blue-800">
                            <li class="flex gap-3">
                                <span class="bg-blue-200 text-blue-800 font-bold w-6 h-6 rounded flex items-center justify-center shrink-0">1</span>
                                <span>You receive a reply in your standard inbox (Outlook, Gmail, etc).</span>
                            </li>
                            <li class="flex gap-3">
                                <span class="bg-blue-200 text-blue-800 font-bold w-6 h-6 rounded flex items-center justify-center shrink-0">2</span>
                                <span>Forward it to <strong class="select-all cursor-copy">mailtomax@maxcredible.com</strong>.</span>
                            </li>
                            <li class="flex gap-3">
                                <span class="bg-blue-200 text-blue-800 font-bold w-6 h-6 rounded flex items-center justify-center shrink-0">3</span>
                                <span>Done. We link it to the debtor automatically.</span>
                            </li>
                        </ol>
                    </div>
                    
                    <div id="simulation-feedback" class="hidden bg-green-50 border border-green-200 p-5 rounded-xl animate-[fadeIn_0.5s_ease-out]">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white">
                                <i class="ph ph-check font-bold"></i>
                            </div>
                            <h3 class="font-bold text-green-900">Success!</h3>
                        </div>
                        <p class="text-sm text-green-800 mb-4">
                            We received the email from <strong>admin@company.com</strong> and linked it to Invoice #INV-001.
                        </p>
                        <button onclick="goToStep(8)" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg font-bold shadow-sm transition-colors">
                            Go to Dashboard
                        </button>
                    </div>
                </div>

                <div class="lg:col-span-8">
                    <div class="mock-browser bg-white shadow-2xl relative">
                        <div class="mock-header">
                            <div class="mock-dot bg-red-400"></div>
                            <div class="mock-dot bg-yellow-400"></div>
                            <div class="mock-dot bg-green-400"></div>
                            <div class="ml-4 text-xs text-slate-500 font-medium bg-white px-3 py-0.5 rounded-md border border-slate-200 w-full text-center">
                                Inbox - admin@company.com - Outlook
                            </div>
                        </div>

                        <div class="flex h-[400px]">
                            <div class="email-client-sidebar hidden md:block">
                                <div class="space-y-1">
                                    <button class="email-btn active"><i class="ph ph-tray mr-2"></i> Inbox <span class="float-right bg-blue-100 text-blue-600 text-[10px] font-bold px-1.5 rounded">1</span></button>
                                    <button class="email-btn"><i class="ph ph-paper-plane-tilt mr-2"></i> Sent</button>
                                    <button class="email-btn"><i class="ph ph-file mr-2"></i> Drafts</button>
                                </div>
                            </div>

                            <div class="flex-1 flex flex-col relative">
                                
                                <div class="border-b border-slate-200 p-3 bg-white flex justify-between items-center">
                                    <div>
                                        <div class="font-bold text-slate-800 text-sm">Acme Corp</div>
                                        <div class="text-xs text-slate-500">Re: Invoice INV-2023-001</div>
                                    </div>
                                    <div class="text-xs text-slate-400">10:42 AM</div>
                                </div>

                                <div class="flex-1 p-6 bg-white overflow-y-auto" id="email-view-content">
                                    <div class="flex gap-4 mb-6">
                                        <div class="w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center text-slate-500 font-bold text-sm">AC</div>
                                        <div>
                                            <div class="font-bold text-slate-900 text-sm">Acme Corp Purchasing</div>
                                            <div class="text-xs text-slate-500">To: <span class="text-slate-700 font-medium">You (admin@company.com)</span></div>
                                        </div>
                                    </div>

                                    <div class="text-sm text-slate-700 leading-relaxed mb-8">
                                        <p class="mb-3">Hi,</p>
                                        <p class="mb-3">We have a question regarding line item #2 on invoice INV-2023-001. Could you please clarify the tax rate applied?</p>
                                        <p>Thanks,<br>Acme Team</p>
                                    </div>

                                    <div class="border-t border-slate-100 pt-4 flex gap-3">
                                        <button class="px-4 py-2 bg-white border border-slate-300 rounded text-sm font-medium text-slate-600 hover:bg-slate-50 flex items-center gap-2">
                                            <i class="ph ph-arrow-u-up-left"></i> Reply
                                        </button>
                                        <button onclick="startForwardDemo()" id="btn-forward-trigger" class="px-4 py-2 bg-blue-600 border border-blue-600 rounded text-sm font-medium text-white hover:bg-blue-700 shadow-sm flex items-center gap-2 animate-pulse">
                                            <i class="ph ph-arrow-bend-up-right"></i> Forward
                                        </button>
                                    </div>
                                </div>

                                <div id="email-composer" class="absolute inset-0 bg-white z-10 flex flex-col hidden">
                                    <div class="border-b border-slate-200 p-3 flex justify-between items-center bg-slate-50">
                                        <span class="font-bold text-slate-700 text-sm">Forwarding...</span>
                                        <button onclick="resetEmailDemo()" class="text-slate-400 hover:text-slate-600"><i class="ph ph-x"></i></button>
                                    </div>
                                    <div class="p-4 space-y-4">
                                        <div class="flex items-center gap-2 border-b border-slate-100 pb-2">
                                            <span class="text-sm text-slate-500 w-10">To:</span>
                                            <span id="composer-to-field" class="text-sm font-mono text-slate-900 typing-cursor"></span>
                                        </div>
                                        <div class="pt-2">
                                            <div class="text-sm text-slate-400 mb-4">
                                                ---------- Forwarded message ---------<br>
                                                From: Acme Corp Purchasing<br>
                                                Subject: Re: Invoice INV-2023-001
                                            </div>
                                        </div>
                                        <div class="pt-4">
                                            <button onclick="finishForwardDemo()" id="btn-send-demo" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium text-sm flex items-center gap-2 opacity-50 cursor-not-allowed transition-all">
                                                Send <i class="ph ph-paper-plane-right"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <p class="text-center text-xs text-slate-400 mt-4 italic">Try it: Click "Forward" above to simulate the process.</p>
                </div>
            </div>
        </div>

        <div id="step-8" class="step-panel w-full max-w-6xl mt-8 px-6 pb-20">
            <div class="flex justify-between items-end mb-8">
                <div>
                    <h1 class="text-3xl font-bold text-slate-900">Mission Control</h1>
                    <p class="text-slate-500">Review your setup before activating the automated debtor journey.</p>
                </div>
                    <div class="text-right">
                        <div class="text-sm font-semibold text-slate-600">Setup Progress</div>
                        <div class="flex items-center gap-2 mb-2">
                            <div class="w-32 h-2 bg-slate-200 rounded-full overflow-hidden">
                                <div id="overview-progress" class="h-full bg-green-500 w-[0%] transition-all duration-500"></div>
                            </div>
                            <span id="overview-percent" class="text-sm font-bold text-green-600">0%</span>
                        </div>
                        <button onclick="markAllStepsComplete()" class="text-[11px] text-blue-500 hover:text-blue-700 font-bold uppercase tracking-wide bg-blue-50 px-2 py-1 rounded hover:bg-blue-100 transition-colors">
                            <i class="ph ph-check-all"></i> Mark All Complete
                        </button>
                    </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                
                <div class="lg:col-span-2 space-y-4">
                    
                    <div id="check-step-1" class="checklist-item bg-white p-4 rounded-xl border border-slate-200 flex justify-between items-center group cursor-pointer hover:border-blue-300" onclick="goToStep(1)">
                        <div class="flex gap-4 items-center">
                            <div class="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 font-bold text-sm status-icon">1</div>
                            <div>
                                <div class="font-bold text-slate-900">Identity & Financials</div>
                                <div class="text-xs text-slate-500">Organization, Email, IBAN</div>
                            </div>
                        </div>
                        <div class="px-2 py-1 bg-slate-100 text-slate-500 text-[10px] font-bold uppercase rounded status-badge">To Do</div>
                    </div>

                    <div id="check-step-2" class="checklist-item bg-white p-4 rounded-xl border border-slate-200 flex justify-between items-center group cursor-pointer hover:border-blue-300" onclick="goToStep(2)">
                        <div class="flex gap-4 items-center">
                            <div class="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 font-bold text-sm status-icon">2</div>
                            <div>
                                <div class="font-bold text-slate-900">Data Source</div>
                                <div class="text-xs text-slate-500">Connect Accounting or Upload CSV</div>
                            </div>
                        </div>
                        <div class="px-2 py-1 bg-slate-100 text-slate-500 text-[10px] font-bold uppercase rounded status-badge">To Do</div>
                    </div>

                    <div id="check-step-3" class="checklist-item bg-white p-4 rounded-xl border border-slate-200 flex justify-between items-center group cursor-pointer hover:border-blue-300" onclick="goToStep(3)">
                        <div class="flex gap-4 items-center">
                            <div class="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 font-bold text-sm status-icon">3</div>
                            <div>
                                <div class="font-bold text-slate-900">Design & Tone</div>
                                <div class="text-xs text-slate-500">Email Template, Logo, Style</div>
                            </div>
                        </div>
                        <div class="px-2 py-1 bg-slate-100 text-slate-500 text-[10px] font-bold uppercase rounded status-badge">To Do</div>
                    </div>

                    <div id="check-step-5" class="checklist-item bg-white p-4 rounded-xl border border-slate-200 flex justify-between items-center group cursor-pointer hover:border-blue-300" onclick="goToStep(5)">
                        <div class="flex gap-4 items-center">
                            <div class="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 font-bold text-sm status-icon">5</div>
                            <div>
                                <div class="font-bold text-slate-900">Journey Configuration</div>
                                <div class="text-xs text-slate-500">Timing and Triggers</div>
                            </div>
                        </div>
                        <div class="px-2 py-1 bg-slate-100 text-slate-500 text-[10px] font-bold uppercase rounded status-badge">To Do</div>
                    </div>

                    <div class="mt-6 pt-6 border-t border-slate-200">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-3">Optional Configurations</h3>
                        
                        <div id="check-step-6" class="checklist-item bg-white p-4 rounded-xl border border-slate-200 flex justify-between items-center mb-3 group cursor-pointer hover:border-blue-300" onclick="goToStep(6)">
                            <div class="flex gap-4 items-center">
                                <div class="w-8 h-8 rounded-full bg-slate-50 border border-slate-200 flex items-center justify-center text-slate-400 font-bold text-sm status-icon"><i class="ph ph-warning-circle"></i></div>
                                <div>
                                    <div class="font-bold text-slate-700">Dispute Handling</div>
                                    <div class="text-xs text-slate-500">Protocol for contested invoices</div>
                                </div>
                            </div>
                            <div class="px-2 py-1 bg-slate-100 text-slate-400 text-[10px] font-bold uppercase rounded status-badge">Optional</div>
                        </div>

                        <div id="check-step-7" class="checklist-item bg-white p-4 rounded-xl border border-slate-200 flex justify-between items-center group cursor-pointer hover:border-blue-300" onclick="goToStep(7)">
                            <div class="flex gap-4 items-center">
                                <div class="w-8 h-8 rounded-full bg-slate-50 border border-slate-200 flex items-center justify-center text-slate-400 font-bold text-sm status-icon"><i class="ph ph-envelope-simple"></i></div>
                                <div>
                                    <div class="font-bold text-slate-700">Inbox Connection</div>
                                    <div class="text-xs text-slate-500">Verify email forwarding</div>
                                </div>
                            </div>
                            <div class="px-2 py-1 bg-slate-100 text-slate-400 text-[10px] font-bold uppercase rounded status-badge">Optional</div>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-1">
                    <div class="bg-white rounded-2xl shadow-xl border border-slate-200 sticky top-6 overflow-hidden">
                            <div class="bg-blue-600 p-6 text-white text-center">
                            <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-3 shadow-inner border border-blue-400">
                                <i class="ph ph-lightning text-2xl text-white"></i>
                            </div>
                            <h2 class="text-xl font-bold mb-2">Immediate Action Required</h2>
                            <p class="text-blue-100 text-sm leading-relaxed">
                                Clicking start will instantly generate the following draft actions based on your settings:
                            </p>
                        </div>

                        <div class="bg-slate-50 border-b border-slate-200 p-4 relative">
                            <div id="batch-overlay" class="absolute inset-0 bg-slate-50/80 backdrop-blur-[1px] z-10 flex items-center justify-center pointer-events-none">
                                <span class="text-xs font-bold text-slate-400 uppercase tracking-wide bg-white px-3 py-1 rounded-full border border-slate-200 shadow-sm">Complete setup to preview</span>
                            </div>

                            <div class="bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden">
                                <table class="w-full text-left text-sm">
                                    <thead class="bg-slate-50 text-xs uppercase text-slate-500 font-bold">
                                        <tr>
                                            <th class="px-3 py-2">Debtor</th>
                                            <th class="px-3 py-2">Action</th>
                                            <th class="px-3 py-2 text-right">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-slate-100">
                                        <tr>
                                            <td class="px-3 py-2 font-medium text-slate-700">Acme Corp</td>
                                            <td class="px-3 py-2 flex items-center gap-1 text-slate-600">
                                                <i class="ph ph-envelope-simple text-blue-500"></i> Reminder 1
                                            </td>
                                            <td class="px-3 py-2 text-right">
                                                <span class="bg-orange-100 text-orange-700 text-[10px] font-bold px-2 py-0.5 rounded-full">Draft</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-3 py-2 font-medium text-slate-700">Globex Inc</td>
                                            <td class="px-3 py-2 flex items-center gap-1 text-slate-600">
                                                <i class="ph ph-phone-call text-purple-500"></i> Call Task
                                            </td>
                                            <td class="px-3 py-2 text-right">
                                                <span class="bg-orange-100 text-orange-700 text-[10px] font-bold px-2 py-0.5 rounded-full">Draft</span>
                                            </td>
                                        </tr>
                                            <tr>
                                            <td class="px-3 py-2 text-slate-400 italic text-xs" colspan="3">
                                                + 41 others pending...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="p-6">
                                <div id="launch-requirements" class="space-y-2 mb-4 text-sm transition-all">
                                <p class="text-slate-500 font-bold text-xs uppercase tracking-wide mb-3">Requirements remaining:</p>
                                <div id="req-data" class="flex items-center gap-2 text-xs text-slate-500 font-medium">
                                    <i class="ph ph-circle text-slate-300 text-lg"></i> Connect Data
                                </div>
                                <div id="req-template" class="flex items-center gap-2 text-xs text-slate-500 font-medium">
                                    <i class="ph ph-circle text-slate-300 text-lg"></i> Define Template
                                </div>
                                <div id="req-journey" class="flex items-center gap-2 text-xs text-slate-500 font-medium">
                                    <i class="ph ph-circle text-slate-300 text-lg"></i> Set Journey Config
                                </div>
                            </div>

                            <button id="btn-go-live" disabled onclick="goLive()" class="launch-btn w-full py-4 rounded-xl text-white font-bold text-lg flex items-center justify-center gap-2 transition-all transform active:scale-95 group disabled:opacity-50 disabled:scale-100 disabled:cursor-not-allowed">
                                <span>Generate First Batch</span>
                                <i class="ph ph-stack-simple group-hover:rotate-12 transition-transform"></i>
                            </button>
                            
                            <p class="text-[11px] text-center text-slate-500 mt-4 leading-tight bg-slate-50 p-3 rounded-lg border border-slate-100">
                                <strong><i class="ph ph-shield-check text-blue-600"></i> Safety Lock:</strong> Nothing sends automatically yet. You must manually approve this first batch on the next screen.
                            </p>
                        </div>
                    </div>
                </div>
           </div> 
        </div> 
        </div></div><div id="step-9" class="step-panel absolute inset-0 w-full h-full bg-white overflow-hidden z-20">
            <div class="flex h-full">
                
                <div id="batch-left-panel" class="w-full shrink-0 border-r border-slate-200 flex flex-col bg-white h-full z-10 shadow-sm transition-all duration-500 ease-in-out">
                    
                    <div class="h-16 border-b border-slate-200 flex items-center px-4 justify-between shrink-0">
                        <div class="flex items-center gap-2 font-bold text-slate-800">
                            <button onclick="goToStep(8)" class="text-slate-400 hover:text-blue-600"><i class="ph ph-arrow-left"></i></button>
                            Email Batch Review
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xs text-slate-500"><span id="selected-count">0</span> Selected</span>
                            <button onclick="approveBatch()" class="bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold px-3 py-1.5 rounded flex items-center gap-1 shadow-sm">
                                Send Batch <i class="ph ph-paper-plane-right"></i>
                            </button>
                        </div>
                    </div>

                    <div class="p-3 border-b border-slate-100 bg-slate-50/50 flex gap-2">
                        <div class="relative flex-1">
                            <i class="ph ph-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"></i>
                            <input type="text" placeholder="Search customer, number..." class="w-full pl-9 pr-3 py-1.5 text-sm border border-slate-300 rounded bg-white focus:ring-1 focus:ring-blue-500 outline-none">
                        </div>
                        <select class="text-sm border border-slate-300 rounded px-2 bg-white text-slate-600 outline-none">
                            <option>Status: Draft</option>
                            <option>Status: Sent</option>
                        </select>
                    </div>

                    <div class="grid grid-cols-12 gap-2 px-4 py-2 bg-slate-100 border-b border-slate-200 text-[10px] uppercase font-bold text-slate-500 items-center">
                        <div class="col-span-1 text-center"><input type="checkbox" class="rounded border-slate-300"></div>
                        <div class="col-span-3">Content / Name</div>
                        <div class="col-span-3">Numbers</div>
                        <div class="col-span-3">Dates</div>
                        <div class="col-span-2 text-right">Action</div>
                    </div>

                    <div class="flex-1 overflow-y-auto" id="batch-email-list">
                        <div onclick="selectBatchEmail(this, 'acme')" class="batch-item group grid grid-cols-12 gap-2 px-4 py-3 border-b border-slate-100 cursor-pointer hover:bg-slate-50 transition-colors items-center border-l-4 border-l-transparent">
                            <div class="col-span-1 text-center" onclick="event.stopPropagation()">
                                <input type="checkbox" class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                            </div>
                            <div class="col-span-3">
                                <div class="font-bold text-slate-800 text-sm truncate">Acme Corp</div>
                                <div class="text-[10px] text-slate-500 truncate">Payment Reminder</div>
                            </div>
                            <div class="col-span-3">
                                <div class="text-xs text-slate-700 font-mono">CUST-001</div>
                                <div class="text-[10px] text-slate-400">INV-2023-001</div>
                            </div>
                            <div class="col-span-3">
                                <div class="text-xs text-slate-700">Proc: Today</div>
                                <div class="text-[10px] text-slate-400">Crtd: 10:42 AM</div>
                            </div>
                            <div class="col-span-2 text-right">
                                <span class="text-[10px] bg-orange-100 text-orange-700 font-bold px-2 py-0.5 rounded">Draft</span>
                            </div>
                        </div>

                        <div onclick="selectBatchEmail(this, 'globex')" class="batch-item group grid grid-cols-12 gap-2 px-4 py-3 border-b border-slate-100 cursor-pointer hover:bg-slate-50 transition-colors items-center border-l-4 border-l-transparent">
                            <div class="col-span-1 text-center" onclick="event.stopPropagation()">
                                <input type="checkbox" class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                            </div>
                            <div class="col-span-3">
                                <div class="font-bold text-slate-800 text-sm truncate">Globex Inc.</div>
                                <div class="text-[10px] text-slate-500 truncate">URGENT Notice</div>
                            </div>
                            <div class="col-span-3">
                                <div class="text-xs text-slate-700 font-mono">CUST-099</div>
                                <div class="text-[10px] text-slate-400">INV-2023-099</div>
                            </div>
                            <div class="col-span-3">
                                <div class="text-xs text-slate-700">Proc: Today</div>
                                <div class="text-[10px] text-slate-400">Crtd: 10:43 AM</div>
                            </div>
                            <div class="col-span-2 text-right">
                                <span class="text-[10px] bg-orange-100 text-orange-700 font-bold px-2 py-0.5 rounded">Draft</span>
                            </div>
                        </div>

                        <div onclick="selectBatchEmail(this, 'soylent')" class="batch-item group grid grid-cols-12 gap-2 px-4 py-3 border-b border-slate-100 cursor-pointer hover:bg-slate-50 transition-colors items-center border-l-4 border-l-transparent">
                            <div class="col-span-1 text-center" onclick="event.stopPropagation()">
                                <input type="checkbox" class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                            </div>
                            <div class="col-span-3">
                                <div class="font-bold text-slate-800 text-sm truncate">Soylent Corp</div>
                                <div class="text-[10px] text-slate-500 truncate">Final Demand</div>
                            </div>
                            <div class="col-span-3">
                                <div class="text-xs text-slate-700 font-mono">CUST-150</div>
                                <div class="text-[10px] text-slate-400">INV-2023-150</div>
                            </div>
                            <div class="col-span-3">
                                <div class="text-xs text-slate-700">Proc: Today</div>
                                <div class="text-[10px] text-slate-400">Crtd: 10:45 AM</div>
                            </div>
                            <div class="col-span-2 text-right">
                                <span class="text-[10px] bg-orange-100 text-orange-700 font-bold px-2 py-0.5 rounded">Draft</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="batch-right-panel" class="w-0 opacity-0 overflow-hidden bg-slate-100 h-full flex flex-col min-w-0 border-l border-slate-200 transition-all duration-500 ease-in-out">
                    <div class="h-16 border-b border-slate-200 bg-white flex items-center justify-between px-6 shrink-0">
                        <span class="font-bold text-slate-800">Preview</span>
                        <div class="flex items-center gap-3">
                            <button class="text-slate-400 hover:text-slate-600"><i class="ph ph-printer"></i></button>
                            <button class="text-slate-400 hover:text-slate-600"><i class="ph ph-download-simple"></i></button>
                            <button onclick="closeBatchPreview()" class="ml-2 text-slate-400 hover:text-red-500"><i class="ph ph-x"></i></button>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-8 flex justify-center items-start">
                        <div id="batch-preview-container" class="bg-white shadow-xl transition-all duration-300 ease-out origin-top w-[600px] min-h-[800px]"></div>
                    </div>
                </div>
            </div>
        </div>
    </div> <div id="victory-modal" class="fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-[100] hidden flex items-center justify-center p-6">
            <div class="victory-modal bg-white w-full max-w-lg rounded-3xl shadow-2xl p-8 relative overflow-hidden text-center">
                <div class="absolute top-0 left-10 w-2 h-2 bg-blue-500 rounded-full animate-bounce"></div>
                <div class="absolute top-4 right-10 w-3 h-3 bg-yellow-400 rounded-full animate-pulse"></div>

                <div class="w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-green-200">
                    <i class="ph ph-confetti text-4xl"></i>
                </div>

                <h2 class="text-3xl font-bold text-slate-900 mb-2">Batch Generated!</h2>
                <p class="text-lg text-slate-600 mb-6">Your first 43 reminders have been created successfully.</p>

                <div class="bg-orange-50 border border-orange-100 rounded-xl p-5 text-left mb-8 flex gap-4">
                    <div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center text-orange-500 shrink-0">
                            <i class="ph ph-hand-palm text-xl"></i>
                    </div>
                    <div>
                        <h4 class="font-bold text-orange-900 mb-1">Action Required: Manual Review</h4>
                        <p class="text-sm text-orange-800 leading-relaxed">
                            For safety, this very first batch is paused. You must review and approve them before they are sent to your customers.
                        </p>
                    </div>
                </div>

                <button onclick="enterBatchReview()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-xl font-bold text-lg shadow-lg transition-all flex items-center justify-center gap-2">
                    Review Batch Now <i class="ph ph-arrow-right"></i>
                </button>
            </div>
        </div>

        
    <div id="step-10" class="step-panel absolute inset-0 w-full h-full overflow-hidden bg-slate-50 z-20">
    
    <div class="flex flex-col w-full h-full">

        <div class="px-8 py-4 shrink-0 flex items-center justify-between">
            <h1 class="text-2xl font-bold text-slate-800">Dashboard</h1>
            <div class="flex gap-3">
                <div class="relative">
                    <i class="ph ph-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"></i>
                    <input type="text" placeholder="Search with..." class="pl-9 pr-4 py-2 rounded-lg border border-slate-200 text-sm focus:ring-2 focus:ring-blue-500 outline-none bg-white shadow-sm">
                </div>
            </div>
        </div>

        <div class="flex-1 overflow-y-auto px-8 pb-8 transition-opacity duration-1000 opacity-40" id="dashboard-content">
            
            <div class="grid grid-cols-12 gap-6 mb-6">
                
                <div class="col-span-12 lg:col-span-7 bg-white rounded-2xl p-6 shadow-sm border border-slate-200">
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <h3 class="text-lg font-bold text-slate-800">Active Invoices</h3>
                            <p class="text-xs text-slate-500">Total outstanding amount (Base Currency)</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-10 h-10 rounded-full border-4 border-green-500 flex items-center justify-center">
                                <span class="text-[10px] font-bold text-green-700">95%</span>
                            </div>
                            <div class="text-xs font-semibold text-slate-600">2912 Sent<br><span class="text-slate-400">€ 2,000,000</span></div>
                        </div>
                    </div>

                    <div class="flex items-baseline gap-2 mb-6">
                        <span class="text-3xl font-bold text-slate-900">€ 3,855,725.04</span>
                    </div>

                    <div class="relative h-48 mt-4">
                        <div class="absolute inset-0 flex flex-col justify-between text-xs text-slate-300 font-mono z-0 pointer-events-none">
                            <div class="border-b border-slate-100 h-full w-full"></div>
                            <div class="border-b border-slate-100 h-full w-full"></div>
                            <div class="border-b border-slate-100 h-full w-full"></div>
                            <div class="border-b border-slate-100 h-full w-full"></div>
                        </div>
                        
                        <div class="relative z-10 flex items-end justify-between h-full px-4 gap-6">
                            <div class="w-full flex flex-col items-center gap-2 group">
                                <div class="w-full bg-green-500 h-[80%] rounded-t-sm shadow-sm opacity-90 group-hover:opacity-100 transition-all"></div>
                                <span class="text-[10px] font-bold text-slate-500">Not Due</span>
                            </div>
                            <div class="w-full flex flex-col items-center gap-2 group">
                                <div class="w-full bg-green-400 h-[10%] rounded-t-sm shadow-sm opacity-90 group-hover:opacity-100 transition-all"></div>
                                <span class="text-[10px] font-bold text-slate-500">1-15</span>
                            </div>
                            <div class="w-full flex flex-col items-center gap-2 group">
                                <div class="w-full bg-yellow-400 h-[5%] rounded-t-sm shadow-sm opacity-90 group-hover:opacity-100 transition-all"></div>
                                <span class="text-[10px] font-bold text-slate-500">16-30</span>
                            </div>
                            <div class="w-full flex flex-col items-center gap-2 group">
                                <div class="w-full bg-orange-400 h-[8%] rounded-t-sm shadow-sm opacity-90 group-hover:opacity-100 transition-all"></div>
                                <span class="text-[10px] font-bold text-slate-500">31-45</span>
                            </div>
                            <div class="w-full flex flex-col items-center gap-2 group">
                                <div class="w-full bg-red-500 h-[15%] rounded-t-sm shadow-sm opacity-90 group-hover:opacity-100 transition-all"></div>
                                <span class="text-[10px] font-bold text-slate-500 text-red-600">90+</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-span-12 lg:col-span-5 bg-white rounded-2xl p-6 shadow-sm border border-slate-200">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-slate-800">Tasks</h3>
                        <i class="ph ph-info text-slate-400"></i>
                    </div>

                    <div class="flex gap-6">
                        <div class="w-32 h-32 relative shrink-0">
                            <svg viewBox="0 0 36 36" class="w-full h-full transform -rotate-90">
                                <path class="text-slate-100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3.8" />
                                <path class="text-green-500" stroke-dasharray="75, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3.8" />
                                <path class="text-red-500" stroke-dasharray="25, 100" stroke-dashoffset="-75" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3.8" />
                            </svg>
                        </div>

                        <div class="flex-1 space-y-2">
                            <div class="flex justify-between items-center p-2 rounded bg-orange-50 border border-orange-100 cursor-pointer hover:bg-orange-100 transition-colors" onclick="goToStep(9)">
                                <div class="flex items-center gap-2">
                                    <i class="ph ph-envelope-simple text-orange-500"></i>
                                    <span class="text-sm font-bold text-slate-700">Emails</span>
                                </div>
                                <span class="text-sm font-bold text-slate-900">128</span>
                            </div>
                            <div class="flex justify-between items-center p-2 rounded bg-red-50 border border-red-100 cursor-pointer hover:bg-red-100 transition-colors" onclick="goToStep(6)">
                                <div class="flex items-center gap-2">
                                    <i class="ph ph-warning-circle text-red-500"></i>
                                    <span class="text-sm font-bold text-slate-700">Issues</span>
                                </div>
                                <span class="text-sm font-bold text-slate-900">136</span>
                            </div>
                            <div class="flex justify-between items-center p-2 rounded bg-slate-50 border border-slate-100">
                                <div class="flex items-center gap-2">
                                    <i class="ph ph-phone-call text-slate-400"></i>
                                    <span class="text-sm font-bold text-slate-600">Calls</span>
                                </div>
                                <span class="text-sm font-bold text-slate-400">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="px-6 py-4 border-b border-slate-200 flex justify-between items-center">
                    <h3 class="font-bold text-slate-800">Top 10 Priority Invoices</h3>
                    <button class="text-xs font-bold text-blue-600 border border-blue-200 px-3 py-1.5 rounded-lg">Filter</button>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-left text-xs whitespace-nowrap">
                        <thead class="bg-slate-50 text-slate-500 font-bold border-b border-slate-200 uppercase">
                            <tr>
                                <th class="px-4 py-3">Invoice #</th>
                                <th class="px-4 py-3">Open Issue</th>
                                <th class="px-4 py-3">Date</th>
                                <th class="px-4 py-3">Due</th>
                                <th class="px-4 py-3 text-right">Amount</th>
                                <th class="px-4 py-3">Profile</th>
                                <th class="px-4 py-3">Customer</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            <tr class="hover:bg-slate-50">
                                <td class="px-4 py-3 text-blue-600 font-medium">394_2025_001</td>
                                <td class="px-4 py-3"><span class="bg-green-100 text-green-700 px-2 py-0.5 rounded">No</span></td>
                                <td class="px-4 py-3">12/10/2025</td>
                                <td class="px-4 py-3 text-red-600 font-bold">79 Days</td>
                                <td class="px-4 py-3 text-right font-bold">€ 42,041.41</td>
                                <td class="px-4 py-3">XXL</td>
                                <td class="px-4 py-3">Tata Steel Ijmuiden</td>
                            </tr>
                            <tr class="hover:bg-slate-50">
                                <td class="px-4 py-3 text-blue-600 font-medium">394_2025_002</td>
                                <td class="px-4 py-3"><span class="bg-red-100 text-red-700 px-2 py-0.5 rounded">Yes</span></td>
                                <td class="px-4 py-3">15/11/2025</td>
                                <td class="px-4 py-3 text-red-600 font-bold">45 Days</td>
                                <td class="px-4 py-3 text-right font-bold">€ 12,500.00</td>
                                <td class="px-4 py-3">Std</td>
                                <td class="px-4 py-3">Universitair Medisch</td>
                            </tr>
                            <tr class="hover:bg-slate-50">
                                <td class="px-4 py-3 text-blue-600 font-medium">394_2025_003</td>
                                <td class="px-4 py-3"><span class="bg-green-100 text-green-700 px-2 py-0.5 rounded">No</span></td>
                                <td class="px-4 py-3">01/12/2025</td>
                                <td class="px-4 py-3 text-orange-500 font-bold">15 Days</td>
                                <td class="px-4 py-3 text-right font-bold">€ 8,200.00</td>
                                <td class="px-4 py-3">SME</td>
                                <td class="px-4 py-3">Woonbedrijf SWS</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="tour-overlay" class="absolute bottom-10 left-1/2 -translate-x-1/2 bg-white p-8 rounded-2xl shadow-2xl max-w-lg z-50 border border-slate-200 animate-[slideUp_0.5s_ease-out]">
            <div class="absolute -top-3 left-1/2 -translate-x-1/2 w-6 h-6 bg-white transform rotate-45 border-t border-l border-slate-200"></div>
            
            <div class="flex justify-between items-center mb-4">
                <h4 class="font-bold text-xl text-blue-600" id="tour-title">Aging Buckets</h4>
                <span class="text-xs font-bold text-slate-400 bg-slate-100 px-2 py-1 rounded" id="tour-counter">1 / 3</span>
            </div>
            
            <p class="text-slate-600 mb-8 text-lg leading-relaxed" id="tour-text">
                Watch this daily. The '90+ days' red bar represents your highest risk. Keep this low to maintain healthy cash flow.
            </p>
            
            <div class="flex justify-end">
                <button onclick="nextTourStep()" id="tour-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors shadow-lg shadow-blue-500/30">
                    Next Tip <i class="ph ph-arrow-right"></i>
                </button>
            </div>
        </div>
    </div> </div>
    <div id="integration-auth-modal" class="fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-[100] hidden flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-xl shadow-2xl overflow-hidden transform transition-all scale-95 opacity-0 animate-scale-in" id="auth-modal-content">
            
            <div class="bg-slate-100 border-b border-slate-200 px-4 py-2 flex items-center gap-2">
                <div class="flex gap-1.5">
                    <div class="w-3 h-3 rounded-full bg-red-400"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
                    <div class="w-3 h-3 rounded-full bg-green-400"></div>
                </div>
                <div class="flex-1 text-center">
                    <div class="bg-white rounded px-2 py-0.5 text-[10px] text-slate-500 border border-slate-200 font-mono truncate" id="auth-url-bar">
                        https://login.exactonline.com/oauth/authorize
                    </div>
                </div>
            </div>

            <div class="p-8">
                <div class="text-center mb-8">
                    <div id="auth-logo-box" class="w-16 h-16 rounded-xl flex items-center justify-center text-white font-bold text-2xl shadow-lg mx-auto mb-4 transition-colors">
                        EO
                    </div>
                    <h3 class="text-xl font-bold text-slate-900" id="auth-title">Log in to Exact Online</h3>
                    <p class="text-slate-500 text-xs mt-2">MaxCredible is requesting access to your administration.</p>
                </div>

                <form onsubmit="event.preventDefault(); submitExternalAuth();" class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-600 uppercase mb-1">Username</label>
                        <input type="text" value="admin@company.com" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm font-medium bg-slate-50">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-600 uppercase mb-1">Password</label>
                        <input type="password" value="password123" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm font-medium bg-slate-50">
                    </div>
                    
                    <button type="submit" id="btn-auth-submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg shadow-md transition-all mt-4">
                        Allow Access
                    </button>
                </form>
                
                <div class="text-center mt-6">
                    <button onclick="closeAuthModal()" class="text-slate-400 text-xs hover:text-slate-600">Cancel and go back</button>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>